# pwen.github.io — Claude Context

## What This Is

Personal website / blog built with **Jekyll** and hosted on **GitHub Pages**.

- **码字的地儿** (`/`) — Blog / journal (Chinese, bilingual with `/en/`)
- **看戏的地儿** (`/pulse/`) — Macro thesis tracker (5 theses on where the world is heading, with live dashboard metrics)

## Tech Stack

- Jekyll 3.10, `github-pages` gem
- Vanilla JS (no framework)
- Chart.js 4 for sparklines on the Pulse page
- CSS: `assets/css/style.css` (main), `assets/css/tags.css`, `assets/css/pulse.css`
- Deployed via GitHub Pages (push to `main` triggers build)

## Development

**Assume the user already has `bundle exec jekyll serve` running.** Do not start or restart the server. Changes to HTML/CSS/JS are picked up automatically by Jekyll's auto-regeneration. Just edit files and tell the user to refresh.

```
# If you ever do need to reference the serve command:
cd pwen.github.io && bundle exec jekyll serve --port 4001
```

## Key File Structure

```
_layouts/default.html        — Base layout (nav: 码字的地儿, 看戏的地儿)
_posts/                      — Blog posts (markdown, Chinese)
pulse.html                   — Pulse page (Jekyll page, loads JS)
assets/
  css/pulse.css              — Pulse styles
  js/pulse.js                — Pulse interactive logic (thesis cards, dashboard, sparklines)
  data/pulse/
    theses-2026.json         — Thesis definitions (id, title, summary, color, icon, metrics list)
    metrics.json             — Dashboard metric values + sparkline data (will be auto-generated by GitHub Action)
pulse-content/                   — Thesis markdown write-ups, organized by year
  2026/                          — 2026 thesis files (2026-dollar.md, 2026-china.md, etc.)
BRAINSTORM_PULSE.md          — Living brainstorming doc for thesis development
PLAN_DASHBOARD.md            — Technical architecture plan
```

## Pulse Page Architecture

### Data Flow
- `theses-{year}.json` — Hand-edited. Defines thesis metadata (id, title, summary, color, icon) and which metrics belong to each thesis.
- `metrics.json` — Will be auto-generated daily by GitHub Action (not built yet). Currently contains sample/placeholder data.
- `_pulse/*.md` — Full thesis write-ups in markdown. Fetched by JS and rendered inline when user expands a thesis card.

### Interaction Model
- **Thesis cards** are the filter — clicking a thesis title/summary highlights its dashboard metrics and dims the rest. Click again to deselect.
- **▶ arrow** on each card expands/collapses the full thesis write-up.
- **Colored dots** on metric cards show which theses a metric relates to. Clicking a dot filters to that thesis.
- **Year selector** supports multiple years (for future year-over-year tracking).
- **Reflection section** appears for past years when `theses-{year}.json` has a `reflection` field.

### Year-Over-Year Support
- Each year gets its own `theses-{year}.json` and `_pulse/{year}-*.md` files
- Add year options to the `<select>` in `pulse.html`
- Past years can include a `"reflection"` field in their JSON for retrospective notes

## Style Notes

- Light theme, clean design, lots of whitespace
- Font: Lantinghei SC / PingFang SC (Chinese-first)
- CSS variables defined in `style.css` (:root)
- Pulse page is self-contained within `.pulse` class scope

## What's Not Built Yet

- **GitHub Action data pipeline** — `.github/scripts/fetch_pulse.py` + `.github/workflows/pulse.yml` to auto-update `metrics.json` daily using yfinance, FRED API, and optionally Claude for AI summary
- **AI market summary** section on the Pulse page
- Blog is minimal (1 post so far)
